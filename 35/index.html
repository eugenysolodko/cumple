<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>it's coming — 22·11·2025 12:00</title>
<style>
  :root{
    --bg1:#0b1020; --bg2:#13264e; --sun:#ffd27a; --leaf:#34d399; --fg:#fff; --muted:#e7f5ffcc;
  }
  *{box-sizing:border-box} html,body{height:100%}
  body{
    margin:0; color:var(--fg); font-family:Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    background: radial-gradient(1200px 800px at 70% -10%, #19336b 0%, #122145 40%, #0b1020 80%), linear-gradient(180deg, var(--bg2), var(--bg1));
    overflow:hidden;
  }
  .scene{position:relative; inset:0; height:100%; width:100%; display:grid; place-items:center; padding:32px;}
  /* Sun */
  .sun{
    position:fixed; width:52vmin; height:52vmin; border-radius:50%;
    background:radial-gradient(ellipse at 50% 60%, var(--sun) 0%, #ff9f1a 55%, transparent 60%);
    top:6%; left:50%; transform:translateX(-50%); filter:blur(0.3px) saturate(120%);
    animation:pulse 6s ease-in-out infinite;
    opacity:.9;
  }
  @keyframes pulse { 0%,100%{transform:translateX(-50%) scale(1)} 50%{transform:translateX(-50%) scale(1.04)} }

  /* Palms (SVG) */
  .palms{
    position:fixed; inset:0; pointer-events:none; z-index:0; opacity:.25; mix-blend-mode:screen;
  }

  /* Stars/particles canvas */
  canvas#fx{ position:fixed; inset:0; z-index:0; opacity:.45; }

  /* Content */
  .wrap{position:relative; z-index:2; text-align:center; max-width:960px; width:100%;}
  .meta{letter-spacing:.16em; text-transform:uppercase; font-size:12px; color:var(--muted); margin-bottom:18px;}
  h1{
    margin:0 0 20px; font-size: clamp(40px, 9vw, 120px); font-weight:900; letter-spacing:.01em;
    text-shadow: 0 8px 40px rgba(0,0,0,.45);
  }
  .timer{ display:inline-grid; grid-template-columns:repeat(4, minmax(110px,1fr)); gap:14px; margin:10px 0 12px;}
  .box{ background:rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.15); border-radius:20px; padding:18px 16px; min-width:110px; backdrop-filter:blur(6px) saturate(120%);}
  .num{ font-size: clamp(28px, 5.2vw, 54px); font-weight:800; line-height:1; }
  .lab{ font-size:12px; letter-spacing:.12em; text-transform:uppercase; color:#dbeafecc; }

  .tagline{ margin-top:8px; color:#e2e8f0cc; }
  .controls{ margin-top:18px; font-size:13px; color:#d1d5db; }
  .btn{
    margin-left:8px; border:1px solid rgba(255,255,255,.25); color:var(--fg); background:transparent;
    padding:8px 14px; border-radius:999px; cursor:pointer;
  }
  .btn:hover{ border-color:#fff }
  @media (max-width:560px){ .timer{grid-template-columns:repeat(2, minmax(120px,1fr));} }
</style>
</head>
<body>
  <div class="sun" aria-hidden="true"></div>

  <!-- Palms -->
  <svg class="palms" viewBox="0 0 100 100" preserveAspectRatio="none">
    <defs>
      <linearGradient id="lg" x1="0" y1="0" x2="0" y2="1">
        <stop offset="0" stop-color="#34d399" stop-opacity="0.9"/>
        <stop offset="1" stop-color="#22c55e" stop-opacity="0.4"/>
      </linearGradient>
    </defs>
    <!-- left palm -->
    <g transform="translate(5,60) scale(1.1)">
      <path d="M10 40 C14 20, 16 10, 18 0" stroke="url(#lg)" stroke-width="1.2" fill="none"/>
      <path d="M18 0 c -6 -2 -10 -6 -12 -10 c 8 1 12 2 18 8 c 4 -8 8 -10 14 -12 c -4 6 -8 10 -10 16 c 8 -2 14 0 20 4 c -8 2 -14 4 -20 10 c -5 -3 -7 -8 -10 -16z" fill="url(#lg)"/>
    </g>
    <!-- right palm -->
    <g transform="translate(85,58) scale(-1.05,1.05)">
      <path d="M10 40 C14 20, 16 10, 18 0" stroke="url(#lg)" stroke-width="1.2" fill="none"/>
      <path d="M18 0 c -6 -2 -10 -6 -12 -10 c 8 1 12 2 18 8 c 4 -8 8 -10 14 -12 c -4 6 -8 10 -10 16 c 8 -2 14 0 20 4 c -8 2 -14 4 -20 10 c -5 -3 -7 -8 -10 -16z" fill="url(#lg)"/>
    </g>
  </svg>

  <canvas id="fx"></canvas>

  <main class="scene">
    <div class="wrap">
      <div class="meta">BARCELONA — 22·11·2025 — 12:00</div>
      <h1>it's coming</h1>

      <div class="timer" aria-live="polite">
        <div class="box"><div class="num" id="d">–</div><div class="lab">days</div></div>
        <div class="box"><div class="num" id="h">–</div><div class="lab">hours</div></div>
        <div class="box"><div class="num" id="m">–</div><div class="lab">min</div></div>
        <div class="box"><div class="num" id="s">–</div><div class="lab">sec</div></div>
      </div>

      <div class="tagline">Vermut with friends. Bring your good vibes.</div>
      <div class="controls">Music: <button class="btn" id="play">Play</button> <button class="btn" id="stop">Stop</button></div>
    </div>
  </main>

<script>
  // ==== Countdown (CET, UTC+1) ====
  const target = new Date("2025-11-22T12:00:00+01:00").getTime();
  const $ = (id) => document.getElementById(id);
  function tick(){
    let diff = target - Date.now();
    if(diff <= 0){ ["d","h","m","s"].forEach(k=>$(k).textContent="00"); return; }
    const d = Math.floor(diff/864e5); diff -= d*864e5;
    const h = Math.floor(diff/36e5);  diff -= h*36e5;
    const m = Math.floor(diff/6e4);   diff -= m*6e4;
    const s = Math.floor(diff/1e3);
    $("d").textContent = d;
    $("h").textContent = String(h).padStart(2,"0");
    $("m").textContent = String(m).padStart(2,"0");
    $("s").textContent = String(s).padStart(2,"0");
  }
  tick(); setInterval(tick,1000);

  // ==== Tropical star/particle drift ====
  const cvs = document.getElementById('fx'), ctx = cvs.getContext('2d');
  let W,H,P=[];
  function resize(){ W=cvs.width=innerWidth; H=cvs.height=innerHeight; }
  addEventListener('resize', resize); resize();
  function spawn(n=110){
    P = Array.from({length:n}, ()=>({
      x:Math.random()*W, y:Math.random()*H,
      vx:(Math.random()-.5)*.15, vy:(Math.random()-.5)*.12,
      r: Math.random()*1.4 + .2, a: Math.random()*.5 + .2
    }));
  }
  spawn();
  (function loop(){
    ctx.fillStyle='rgba(10,16,32,.25)'; ctx.fillRect(0,0,W,H);
    for(const p of P){
      p.x+=p.vx; p.y+=p.vy;
      if(p.x<0||p.x>W) p.vx*=-1; if(p.y<0||p.y>H) p.vy*=-1;
      ctx.beginPath(); ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
      ctx.fillStyle=`rgba(255,255,255,${p.a})`; ctx.fill();
    }
    requestAnimationFrame(loop);
  })();

  // ==== Music: use external track if provided, otherwise generate a tropical loop ====
  const audioUrl = ""; // <-- If you have a Nickodemus track URL (mp3/https), paste it here.
  let ac, master, nodes=[], playing=false, media;

  function makePercLoop(){
    // light conga + shaker loop
    const tempo = 96; // BPM tropical
    const spb = 60/tempo;
    const now = ac.currentTime + 0.1;

    // shaker
    for(let i=0;i<64;i++){
      const t = now + i*spb/2;
      const src = ac.createBufferSource();
      src.buffer = noise(0.03); // short hiss
      const g = ac.createGain(); g.gain.value=0.05;
      const f = ac.createBiquadFilter(); f.type="highpass"; f.frequency.value=4000;
      src.connect(f).connect(g).connect(master);
      src.start(t);
      nodes.push(src,g,f);
    }
    // conga accents
    [0,1.5,2,3.5].forEach(barBeat=>{
      for(let bar=0; bar<16; bar++){
        const t = now + (bar*4 + barBeat)*spb;
        const osc = ac.createOscillator(); osc.type="sine"; osc.frequency.value=180;
        const g = ac.createGain(); g.gain.setValueAtTime(0.0, t);
        g.gain.linearRampToValueAtTime(0.12, t+0.005);
        g.gain.exponentialRampToValueAtTime(0.0001, t+0.25);
        const f = ac.createBiquadFilter(); f.type="bandpass"; f.frequency.value=300;
        osc.connect(f).connect(g).connect(master);
        osc.start(t); osc.stop(t+0.28);
        nodes.push(osc,g,f);
      }
    });
  }
  function noise(len=0.02){
    const n = ac.createBuffer(1, ac.sampleRate*len, ac.sampleRate);
    const d = n.getChannelData(0); for(let i=0;i<d.length;i++) d[i]=Math.random()*2-1;
    return n;
  }

  function start(){
    if(playing) return; playing=true;
    ac = new (window.AudioContext||window.webkitAudioContext)();
    master = ac.createGain(); master.gain.value=0.12; master.connect(ac.destination);

    if(audioUrl){
      media = new Audio(audioUrl); media.loop=true; media.crossOrigin="anonymous";
      const src = ac.createMediaElementSource(media); src.connect(master); media.play();
      nodes.push(src); 
    } else {
      // build our loop
      makePercLoop();
    }
    document.getElementById('play').textContent="Playing";
  }
  function stop(){
    if(!playing) return; playing=false;
    if(media){ media.pause(); media.currentTime=0; media=null; }
    nodes.forEach(n => { try{ n.stop?.(); }catch{} });
    nodes=[]; master?.disconnect?.(); ac?.close?.();
    document.getElementById('play').textContent="Play";
  }
  document.getElementById('play').addEventListener('click', start);
  document.getElementById('stop').addEventListener('click', stop);
</script>
</body>
</html>
